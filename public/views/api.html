<div data-ng-include src="'/views/includes/connection.html'"></div>

<h2>REST API</h2>

<h3><a id="user-content-block" class="anchor" href="#block" aria-hidden="true"><span class="octicon octicon-link"></span></a>Block</h3>

<pre><code>  /api/block/[:hash]
  /api/block/00000000a967199a2fad0877433c93df785a8d8ce062e5f9b451cd1397bdbf62
</code></pre>

<h3><a id="user-content-block-index" class="anchor" href="#block-index" aria-hidden="true"><span class="octicon octicon-link"></span></a>Block index</h3>

<p>Get block hash by height</p>

<pre><code>  /api/block-index/[:height]
  /api/block-index/0
</code></pre>

<p>This would return:</p>

<pre><code>{"blockHash":"000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f"}
</code></pre>

<p>which is the hash of the Genesis block (0 height)</p>

<h3><a id="user-content-transaction" class="anchor" href="#transaction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transaction</h3>

<pre><code>  /api/tx/[:txid]
  /api/tx/525de308971eabd941b139f46c7198b5af9479325c2395db7f2fb5ae8562556c
  /api/raw/[:rawid]
  /api/raw/525de308971eabd941b139f46c7198b5af9479325c2395db7f2fb5ae8562556c
</code></pre>

<h3><a id="user-content-address" class="anchor" href="#address" aria-hidden="true"><span class="octicon octicon-link"></span></a>Address</h3>

<pre><code>  /api/addr/[:addr][?noTxList=1&amp;noCache=1]
  /api/addr/mmvP3mTe53qxHdPqXEvdu8WdC7GfQ2vmx5?noTxList=1
</code></pre>

<h3><a id="user-content-address-properties" class="anchor" href="#address-properties" aria-hidden="true"><span class="octicon octicon-link"></span></a>Address Properties</h3>

<pre><code>  /api/addr/[:addr]/balance
  /api/addr/[:addr]/totalReceived
  /api/addr/[:addr]/totalSent
  /api/addr/[:addr]/unconfirmedBalance
</code></pre>

<p>The response contains the value in Satoshis.</p>

<h3><a id="user-content-unspent-outputs" class="anchor" href="#unspent-outputs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unspent Outputs</h3>

<pre><code>  /api/addr/[:addr]/utxo[?noCache=1]
</code></pre>

<p>Sample return:</p>

<div class="highlight highlight-json"><pre>[
    {
      <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>n2PuaAguxZqLddRbTnAoAuwKYgN2w2hZk7<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>txid<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>dbfdc2a0d22a8282c4e7be0452d595695f3a39173bed4f48e590877382b112fc<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>vout<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
      <span class="pl-s"><span class="pl-pds">"</span>ts<span class="pl-pds">"</span></span>: <span class="pl-c1">1401276201</span>,
      <span class="pl-s"><span class="pl-pds">"</span>scriptPubKey<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>76a914e50575162795cd77366fb80d728e3216bd52deac88ac<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">0.001</span>,
      <span class="pl-s"><span class="pl-pds">"</span>confirmations<span class="pl-pds">"</span></span>: <span class="pl-c1">3</span>
    },
    {
      <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>n2PuaAguxZqLddRbTnAoAuwKYgN2w2hZk7<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>txid<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>e2b82af55d64f12fd0dd075d0922ee7d6a300f58fe60a23cbb5831b31d1d58b4<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>vout<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
      <span class="pl-s"><span class="pl-pds">"</span>ts<span class="pl-pds">"</span></span>: <span class="pl-c1">1401226410</span>,
      <span class="pl-s"><span class="pl-pds">"</span>scriptPubKey<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>76a914e50575162795cd77366fb80d728e3216bd52deac88ac<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-c1">0.001</span>,
      <span class="pl-s"><span class="pl-pds">"</span>confirmation<span class="pl-pds">"</span></span>: <span class="pl-c1">6</span>,
      <span class="pl-s"><span class="pl-pds">"</span>confirmationsFromCache<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>
    }
]</pre></div>

<p>Please note that in case confirmations are cached (which happens by default when the number of confirmations is bigger that INSIGHT_SAFE_CONFIRMATIONS) the response will include the pair confirmationsFromCache:true, and confirmations will equal INSIGHT_SAFE_CONFIRMATIONS. See noCache and INSIGHT_IGNORE_CACHE options for details.</p>

<h3><a id="user-content-unspent-outputs-for-multiple-addresses" class="anchor" href="#unspent-outputs-for-multiple-addresses" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unspent Outputs for multiple addresses</h3>

<p>GET method:</p>

<pre><code>  /api/addrs/[:addrs]/utxo
  /api/addrs/2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f/utxo
</code></pre>

<p>POST method:</p>

<pre><code>  /api/addrs/utxo
</code></pre>

<p>POST params:</p>

<pre><code>addrs: 2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f
</code></pre>

<h3><a id="user-content-transactions-by-block" class="anchor" href="#transactions-by-block" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transactions by Block</h3>

<pre><code>  /api/txs/?block=HASH
  /api/txs/?block=00000000fa6cf7367e50ad14eb0ca4737131f256fc4c5841fd3c3f140140e6b6
</code></pre>

<h3><a id="user-content-transactions-by-address" class="anchor" href="#transactions-by-address" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transactions by Address</h3>

<pre><code>  /api/txs/?address=ADDR
  /api/txs/?address=mmhmMNfBiZZ37g1tgg2t8DDbNoEdqKVxAL
</code></pre>

<h3><a id="user-content-transactions-for-multiple-addresses" class="anchor" href="#transactions-for-multiple-addresses" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transactions for multiple addresses</h3>

<p>GET method:</p>

<pre><code>  /api/addrs/[:addrs]/txs[?from=&amp;to=]
  /api/addrs/2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f/txs?from=0&amp;to=20
</code></pre>

<p>POST method:</p>

<pre><code>  /api/addrs/txs
</code></pre>

<p>POST params:</p>

<pre><code>addrs: 2NF2baYuJAkCKo5onjUKEPdARQkZ6SYyKd5,2NAre8sX2povnjy4aeiHKeEh97Qhn97tB1f
from (optional): 0
to (optional): 20
</code></pre>

<p>Sample output:</p>

<pre><code>{ totalItems: 100,
  from: 0,
  to: 20,
  items:
    [ { txid: '3e81723d069b12983b2ef694c9782d32fca26cc978de744acbc32c3d3496e915',
       version: 1,
       locktime: 0,
       vin: [Object],
       vout: [Object],
       blockhash: '00000000011a135e5277f5493c52c66829792392632b8b65429cf07ad3c47a6c',
       confirmations: 109367,
       time: 1393659685,
       blocktime: 1393659685,
       valueOut: 0.3453,
       size: 225,
       firstSeenTs: undefined,
       valueIn: 0.3454,
       fees: 0.0001 },
      { ... },
      { ... },
      ...
      { ... }
    ]
 }
</code></pre>

<p>Note: if pagination params are not specified, the result is an array of transactions.</p>

<h3><a id="user-content-transaction-broadcasting" class="anchor" href="#transaction-broadcasting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transaction broadcasting</h3>

<p>POST method:</p>

<pre><code>  /api/tx/send
</code></pre>

<p>POST params:</p>

<pre><code>  rawtx: "signed transaction as hex string"

  eg

  rawtx: 01000000017b1eabe0209b1fe794124575ef807057c77ada2138ae4fa8d6c4de0398a14f3f00000000494830450221008949f0cb400094ad2b5eb399d59d01c14d73d8fe6e96df1a7150deb388ab8935022079656090d7f6bac4c9a94e0aad311a4268e082a725f8aeae0573fb12ff866a5f01ffffffff01f0ca052a010000001976a914cbc20a7664f2f69e5355aa427045bc15e7c6c77288ac00000000

</code></pre>

<p>POST response:</p>

<pre><code>  {
      txid: [:txid]
  }

  eg

  {
      txid: "c7736a0a0046d5a8cc61c8c3c2821d4d7517f5de2bc66a966011aaa79965ffba"
  }
</code></pre>

<h3><a id="user-content-historic-blockchain-data-sync-status" class="anchor" href="#historic-blockchain-data-sync-status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Historic blockchain data sync status</h3>

<pre><code>  /api/sync
</code></pre>

<h3><a id="user-content-live-network-p2p-data-sync-status" class="anchor" href="#live-network-p2p-data-sync-status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Live network p2p data sync status</h3>

<pre><code>  /api/peer
</code></pre>

<h3><a id="user-content-status-of-the-bitcoin-network" class="anchor" href="#status-of-the-bitcoin-network" aria-hidden="true"><span class="octicon octicon-link"></span></a>Status of the bitcoin network</h3>

<pre><code>  /api/status?q=xxx
</code></pre>

<p>Where "xxx" can be:</p>

<ul>
<li>getInfo</li>
<li>getDifficulty</li>
<li>getTxOutSetInfo</li>
<li>getBestBlockHash</li>
<li>getLastBlockHash</li>
</ul>

<h3><a id="user-content-utility-methods" class="anchor" href="#utility-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Utility methods</h3>

<pre><code>  /api/utils/estimatefee[?nbBlocks=2]
</code></pre>

<h2>Web Socket API</h2>

<p>The web socket API is served using <a href="http://socket.io">socket.io</a>.</p>

<p>The following are the events published by insight:</p>

<p>'tx': new transaction received from network. This event is published in the 'inv' room. Data will be a app/models/Transaction object.
Sample output:</p>

<pre><code>{
  "txid":"00c1b1acb310b87085c7deaaeba478cef5dc9519fab87a4d943ecbb39bd5b053",
  "processed":false
  ...
}
</code></pre>

<p>'block': new block received from network. This event is published in the 'inv' room. Data will be a app/models/Block object.
Sample output:</p>

<pre><code>{
  "hash":"000000004a3d187c430cd6a5e988aca3b19e1f1d1727a50dead6c8ac26899b96",
  "time":1389789343,
  ...
}
</code></pre>

<p>'': new transaction concerning  received from network. This event is published in the '' room.</p>

<p>'status': every 1% increment on the sync task, this event will be triggered. This event is published in the 'sync' room.</p>

<p>Sample output:</p>

<pre><code>{
  blocksToSync: 164141,
  syncedBlocks: 475,
  upToExisting: true,
  scanningBackward: true,
  isEndGenesis: true,
  end: "000000000933ea01ad0ee984209779baaec3ced90fa3f408719526f8d77f4943",
  isStartGenesis: false,
  start: "000000009f929800556a8f3cfdbe57c187f2f679e351b12f7011bfc276c41b6d"
}
</code></pre>

<h3><a id="user-content-example-usage" class="anchor" href="#example-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Usage</h3>

<p>The following html page connects to the socket.io insight API and listens for new transactions.</p>

<pre><code>&lt;html&gt;
&lt;body&gt;
  &lt;script src="http://&lt;insight-server&gt;:&lt;port&gt;/socket.io/socket.io.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    eventToListenTo = 'tx'
    room = 'inv'

    var socket = io("http://&lt;insight-server&gt;:&lt;port&gt;/");
    socket.on('connect', function() {
      // Join the room.
      socket.emit('subscribe', room);
    })
    socket.on(eventToListenTo, function(data) {
      console.log("New transaction received: " + data.txid)
    })
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
